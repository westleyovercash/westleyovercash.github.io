---
layout: default
title: Blog
---

<div style="display: flex; gap: 4rem; align-items: flex-start;">
  
  <!-- Sidebar (left) -->
  <aside style="flex: 0 0 280px; position: sticky; top: 2rem;">
    <div style="background: #f8f8f8; border-radius: 12px; padding: 2rem;">
      <h3 style="font-size: 1.1rem; font-weight: 600; margin-bottom: 1rem; text-transform: none;">Subscribe</h3>
      <p style="font-size: 0.95rem; margin-bottom: 1.5rem; line-height: 1.5; color: #333;">
        I send occasional letters expanding on these stories. Leave your email to get your copy.
      </p>
      
      <form action="https://buttondown.email/api/emails/embed-subscribe/wessence" method="post" target="_blank">
        <input 
          type="email" 
          name="email" 
          placeholder="Enter your email"
          required
          style="width: 100%; padding: 0.75rem; margin-bottom: 1rem; border: 1px solid #ddd; border-radius: 6px; font-size: 0.95rem; font-family: inherit;"
        />
        
        <label style="display: flex; align-items: flex-start; gap: 0.5rem; font-size: 0.85rem; margin-bottom: 1rem; color: #555; line-height: 1.4;">
          <input type="checkbox" required style="margin-top: 0.15rem; flex-shrink: 0;" />
          <span>I consent to these emails and can say "bye" whenever I want.</span>
        </label>
        
        <button 
          type="submit"
          style="width: 100%; padding: 0.75rem; background: #ff6b35; color: white; border: none; border-radius: 6px; font-size: 1rem; font-weight: 600; cursor: pointer; font-family: inherit;"
        >
          Subscribe
        </button>
      </form>
    </div>
  </aside>
  
  <!-- Main content (right) -->
  <div style="flex: 1; min-width: 0;">
    <h1 style="font-size: 3.5rem; margin-bottom: 3rem; color: #ff6b35;">Blog</h1>

    <div id="post-container">
    {% for post in paginator.posts %}
    <article style="margin-bottom: 4rem;">
      <h2 style="margin-bottom: 1.5rem; text-transform: none !important;">
        <a href="{{ post.url | relative_url }}" style="color: #ff6b35; text-decoration: none;">
          {{ post.title }}
        </a>
      </h2>
      {{ post.content }}
      <hr style="margin: 3rem 0 1.5rem 0; border: none; border-top: 1.5px solid #000; width: 100%;">
      <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 1.5rem;">
        <div style="display: flex; gap: 14px; align-items: center;">
          <!-- X -->
          <a href="https://twitter.com/intent/tweet?url={{ site.url }}{{ post.url | relative_url }}&text={{ post.title | uri_escape }}"
             target="_blank" rel="noopener noreferrer" title="Share on X"
             style="color:#000; text-decoration:none;">
            <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" width="20" height="20">
              <path d="M22.54 0H17.7L12 8.46 6.3 0H1.46L9.89 11.9 0 24h4.84l7.16-9.76L19.16 24H24L14.11 11.9 22.54 0z"/>
            </svg>
          </a>
          <!-- LinkedIn -->
          <a href="https://www.linkedin.com/sharing/share-offsite/?url={{ site.url }}{{ post.url | relative_url }}"
             target="_blank" rel="noopener noreferrer" title="Share on LinkedIn"
             style="color:#000; text-decoration:none;">
            <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" width="20" height="20">
              <path d="M19 0h-14C2.2 0 0 2.2 0 5v14c0 2.8 2.2 5 5 5h14c2.8 0 5-2.2 5-5V5c0-2.8-2.2-5-5-5zM7 20H4V9h3v11zm-1.5-12.3C4.6 7.7 4 7.1 4 6.3S4.6 5 5.5 5 7 5.6 7 6.3 6.4 7.7 5.5 7.7zM20 20h-3v-5.5c0-1.5-.5-2.5-1.8-2.5-1 0-1.6.7-1.8 1.4-.1.2-.1.5-.1.8V20h-3s.1-9 0-11h3v1.6c.4-.7 1.1-1.8 2.7-1.8 2 0 3.5 1.3 3.5 4.1V20z"/>
            </svg>
          </a>
          <!-- Copy link -->
          <a href="#" onclick="navigator.clipboard.writeText('{{ site.url }}{{ post.url | relative_url }}'); alert('Link copied!'); return false;"
             title="Copy link" style="color:#000; text-decoration:none;">
            <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" width="20" height="20">
              <path d="M3.9 12c0-1.2.5-2.4 1.3-3.2l2.1-2.1a4.5 4.5 0 016.4 0 1 1 0 11-1.4 1.4 2.5 2.5 0 00-3.6 0L7.6 10a2.5 2.5 0 000 3.6 1 1 0 11-1.4 1.4A4.5 4.5 0 013.9 12zm16.2 0c0 1.2-.5 2.4-1.3 3.2l-2.1 2.1a4.5 4.5 0 01-6.4 0 1 1 0 111.4-1.4 2.5 2.5 0 003.6 0l2.1-2.1a2.5 2.5 0 000-3.6 1 1 0 111.4-1.4 4.5 4.5 0 011.3 3.2zM8.7 13.3a1 1 0 010-1.4l6.6-6.6a1 1 0 111.4 1.4L10 13.3a1 1 0 01-1.4 0z"/>
            </svg>
          </a>
        </div>
        <p style="text-transform: uppercase; font-size: 0.9rem; color: #555; letter-spacing: 0.05em; font-weight: 600; margin: 0;">
          {{ post.date | date: "%B %d, %Y" }}
        </p>
      </div>
    </article>
    {% endfor %}
    </div>

    <!-- Loading indicator -->
    <div id="loading-indicator" style="display: none; text-align: center; padding: 2rem; color: #555; font-size: 0.9rem;">
      Loading more posts...
    </div>

    <!-- Pagination (fallback for no-JS) -->
    {% if paginator.total_pages > 1 %}
    <div id="pagination-links" style="display: flex; justify-content: space-between; margin-top: 4rem; padding-top: 2rem; border-top: 1px solid #e0e0e0;">
      {% if paginator.previous_page %}
        <a href="{{ paginator.previous_page_path | relative_url }}" style="color: #ff6b35; text-decoration: none; font-weight: 600;">← Newer Posts</a>
      {% else %}
        <span></span>
      {% endif %}
      
      {% if paginator.next_page %}
        <a href="{{ paginator.next_page_path | relative_url }}" id="next-page-link" style="color: #ff6b35; text-decoration: none; font-weight: 600;">Older Posts →</a>
      {% endif %}
    </div>
    {% endif %}
  </div>
  
</div>

<script>
(function() {
  'use strict';
  
  // Configuration
  const SCROLL_THRESHOLD = 300; // pixels from bottom to trigger load
  const container = document.getElementById('post-container');
  const loadingIndicator = document.getElementById('loading-indicator');
  const paginationLinks = document.getElementById('pagination-links');
  
  // State
  let isLoading = false;
  let hasMorePages = true;
  let nextPageUrl = '{% if paginator.next_page %}{{ paginator.next_page_path | relative_url }}{% endif %}';
  
  // Hide pagination links since we're using infinite scroll
  if (paginationLinks) {
    paginationLinks.style.display = 'none';
  }
  
  // Check if we're near the bottom of the page
  function isNearBottom() {
    const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
    const windowHeight = window.innerHeight;
    const documentHeight = document.documentElement.scrollHeight;
    
    return (documentHeight - (scrollTop + windowHeight)) < SCROLL_THRESHOLD;
  }
  
  // Extract articles from fetched HTML
  function extractArticles(html) {
    const parser = new DOMParser();
    const doc = parser.parseFromString(html, 'text/html');
    const articles = doc.querySelectorAll('#post-container article');
    return Array.from(articles);
  }
  
  // Extract next page URL from fetched HTML
  function extractNextPageUrl(html) {
    const parser = new DOMParser();
    const doc = parser.parseFromString(html, 'text/html');
    const nextLink = doc.querySelector('#next-page-link');
    return nextLink ? nextLink.getAttribute('href') : null;
  }
  
  // Load next page
  function loadNextPage() {
    if (isLoading || !hasMorePages || !nextPageUrl) {
      return;
    }
    
    isLoading = true;
    loadingIndicator.style.display = 'block';
    
    fetch(nextPageUrl)
      .then(response => {
        if (!response.ok) {
          throw new Error('Failed to load page');
        }
        return response.text();
      })
      .then(html => {
        // Extract articles from the fetched page
        const articles = extractArticles(html);
        
        if (articles.length === 0) {
          hasMorePages = false;
          loadingIndicator.style.display = 'none';
          return;
        }
        
        // Append articles to container
        articles.forEach(article => {
          container.appendChild(article);
        });
        
        // Update next page URL
        const newNextPageUrl = extractNextPageUrl(html);
        if (newNextPageUrl) {
          nextPageUrl = newNextPageUrl;
        } else {
          hasMorePages = false;
        }
        
        loadingIndicator.style.display = 'none';
        isLoading = false;
        
        // Check if we need to load more immediately
        // (in case the loaded content isn't tall enough)
        if (isNearBottom() && hasMorePages) {
          setTimeout(loadNextPage, 100);
        }
      })
      .catch(error => {
        console.error('Error loading posts:', error);
        loadingIndicator.style.display = 'none';
        loadingIndicator.textContent = 'Failed to load more posts';
        isLoading = false;
        hasMorePages = false;
      });
  }
  
  // Handle scroll events
  function handleScroll() {
    if (isNearBottom()) {
      loadNextPage();
    }
  }
  
  // Throttle scroll events for performance
  let scrollTimeout;
  function throttledScroll() {
    if (scrollTimeout) {
      return;
    }
    
    scrollTimeout = setTimeout(function() {
      handleScroll();
      scrollTimeout = null;
    }, 100);
  }
  
  // Initialize
  if (nextPageUrl) {
    window.addEventListener('scroll', throttledScroll);
    
    // Check on load in case initial content doesn't fill the viewport
    setTimeout(function() {
      if (isNearBottom()) {
        loadNextPage();
      }
    }, 100);
  }
})();
</script>
